import{$ as a,r as t,a as Ve,R as tt}from"./index-f_FyfIlU.js";import{_ as st,a as rt,b as xe,c as _e,C as Pe,E as Ce,A as ce,H as nt,G as ot,d as at,e as ct,f as lt,g as it,h as ut,R as dt,i as pt,T as ht,j as mt,k as ft,l as Ct,m as gt,n as yt,o as Rt,p as Se,q as vt,r as wt,s as St,t as bt,u as Et,F as Pt,v as kt,w as Me,V as Mt,B as Ft,x as At}from"./aggrid-community-DdLWDdiJ.js";var ee=a.createContext({}),Le=a.createContext("default"),ve=(e,s,r,n)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const l=e.newAgStackInstance();let u,i,c=!1;return l.then(m=>{if(c){s.destroyBean(m);return}u=m,i=u.getGui(),r.appendChild(i),Oe(n,u)}),()=>{var m;c=!0,u&&((m=i==null?void 0:i.parentElement)==null||m.removeChild(i),s.destroyBean(u),n&&Oe(n,void 0))}},Oe=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},oe=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),ae=class je{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const o=new je;return o.classesMap={...this.classesMap},o.classesMap[s]=r,o}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ge=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},Ue,Ae=(Ue=a.version)==null?void 0:Ue.split(".")[0],ze=Ae==="16"||Ae==="17";function xt(){return Ae==="19"}var be=!1;function Gt(e){return be||setTimeout(()=>be=!1,0),be=!0,e()}var Re=(e,s)=>{!ze&&e&&!be?tt.flushSync(s):s()},Bt=e=>{ze?e():a.startTransition(e)};function It(e,s,r){return a.useSyncExternalStore?a.useSyncExternalStore(e,s):r}function Ee(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const n=[],o=[],l=new Map,u=new Map;for(let i=0;i<s.length;i++){const c=s[i];u.set(c.instanceId,c)}for(let i=0;i<e.length;i++){const c=e[i];l.set(c.instanceId,c),u.has(c.instanceId)&&n.push(c)}for(let i=0;i<s.length;i++){const c=s[i],m=c.instanceId;l.has(m)||o.push(c)}return n.length===e.length&&o.length===0?e:n.length===0&&o.length===s.length?s:n.length===0?o:o.length===0?n:[...n,...o]}var $e=t.forwardRef((e,s)=>{var N;const{registry:r,context:n}=t.useContext(ee),o=t.useRef(null),l=t.useRef(null),u=t.useRef(null),i=t.useRef(null),c=t.useRef(null),m=t.useRef(),[h,F]=t.useState(),[g,f]=t.useState(),[P,E]=t.useState(),[y,p]=t.useState(()=>new ae),[S,I]=t.useState(()=>new ae("ag-hidden")),[v,C]=t.useState(()=>new ae("ag-hidden")),[V,A]=t.useState(()=>new ae("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>ve(h,n,l.current),[h]);const _=t.useCallback(M=>{if(o.current=M,!M||n.isDestroyed()){m.current=n.destroyBean(m.current);return}const j={setInnerRenderer:(T,b)=>{F(T),E(b)},setChildCount:T=>f(T),toggleCss:(T,b)=>p(G=>G.setClass(T,b)),setContractedDisplayed:T=>C(b=>b.setClass("ag-hidden",!T)),setExpandedDisplayed:T=>I(b=>b.setClass("ag-hidden",!T)),setCheckboxVisible:T=>A(b=>b.setClass("ag-invisible",!T)),setCheckboxSpacing:T=>A(b=>b.setClass("ag-group-checkbox-spacing",T))},H=r.createDynamicBean("groupCellRendererCtrl",!0);H&&(m.current=n.createBean(H),m.current.init(j,M,u.current,i.current,c.current,$e,e))},[]),O=t.useMemo(()=>`ag-cell-wrapper ${y.toString()}`,[y]),W=t.useMemo(()=>`ag-group-expanded ${S.toString()}`,[S]),R=t.useMemo(()=>`ag-group-contracted ${v.toString()}`,[v]),d=t.useMemo(()=>`ag-group-checkbox ${V.toString()}`,[V]),w=h==null?void 0:h.componentFromFramework,L=w?h.componentClass:void 0,k=h==null&&P!=null,J=st(P);return a.createElement("span",{className:O,ref:_,...e.colDef?{}:{role:(N=m.current)==null?void 0:N.getCellAriaRole()}},a.createElement("span",{className:W,ref:i}),a.createElement("span",{className:R,ref:c}),a.createElement("span",{className:d,ref:u}),a.createElement("span",{className:"ag-group-value",ref:l},k?J:w?a.createElement(L,{...h.params}):null),a.createElement("span",{className:"ag-group-child-count"},g))}),De=$e,Ge=t.createContext({setMethods:()=>{}}),Ot=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:n,setMethods:o}=e,[{key:l,...u},i]=t.useState(s);return t.useEffect(()=>{r(c=>i(c))},[]),a.createElement(Ge.Provider,{value:{setMethods:o}},a.createElement(n,{key:l,...u}))},Dt=t.memo(Ot),Wt=0;function We(){return`agPortalKey_${++Wt}`}var Je=class{constructor(e,s,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=We(),this.portalKey=We(),this.instanceCreated=this.isStatelessComponent()?ce.resolve(!1):new ce(o=>{this.resolveInstanceCreated=o})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const n=r[e];if(n)return n.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ce(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{var r;this.componentInstance=s,(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Ve.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function ke(e,s,r){e.forEach(n=>{const o=s[n];o&&(r[n]=o)})}var se=class extends Je{constructor(){super(...arguments),this.awaitUpdateCallback=new ce(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Dt}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ce(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,ke(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ce(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Tt=class extends se{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Nt=class extends se{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Ht=class extends se{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:n}=this;return e.label=s,e.icon=r,e.shake=n,e}},Ut=class extends se{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ce(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var r;const s=this.providedMethods;s?(r=s.afterGuiAttached)==null||r.call(s,e):this.awaitSetMethodsCallback.then(()=>{var n,o;return(o=(n=this.providedMethods)==null?void 0:n.afterGuiAttached)==null?void 0:o.call(n,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var s,r;this.expectingNewMethods===!1&&this.hasBeenActive&&((s=this.providedMethods)==null?void 0:s.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),(r=this.resolveFilterPassCallback)==null||r.call(this),this.resolveFilterPassCallback=void 0}updateModel(e){var r;(r=this.resolveFilterPassCallback)==null||r.call(this);const s=new ce(n=>{this.resolveFilterPassCallback=n});this.setModel(e).then(()=>{s.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Vt=class extends se{constructor(){super(...arguments),this.awaitSetMethodsCallback=new ce(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var r;const s=this.providedMethods;s?(r=s.afterGuiAttached)==null||r.call(s,e):this.awaitSetMethodsCallback.then(()=>{var n,o;return(o=(n=this.providedMethods)==null?void 0:n.afterGuiAttached)==null?void 0:o.call(n,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function qe(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ce.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var _t=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),qe(this.floatingFilterParams,e)}},Lt=class extends se{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),qe(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},jt=class extends se{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},zt=class extends se{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},$t=class extends se{refresh(e){this.sourceParams=e,this.refreshProps()}},Jt=class extends se{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},qt=class extends se{refresh(e){this.sourceParams=e,this.refreshProps()}},Kt=class extends se{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Qt=class extends se{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Be(){xe(231)}var Yt=1e3,Zt=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Yt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Re(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Xt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(ee),[n,o]=t.useState(),[l,u]=t.useState(),i=t.useRef(),c=t.useRef(null),m=t.useRef(null),h=t.useRef(null),F=t.useRef(),g=t.useRef();s&&!g.current&&(g.current=new Pe(()=>c.current));const f=t.useCallback(p=>{if(c.current=p,!p||!e.isAlive()||r.isDestroyed()){i.current=r.destroyBean(i.current);return}i.current=r.createBean(new Ce);const S=()=>{var C;const v=e.getSelectAllGui();v&&((C=m.current)==null||C.insertAdjacentElement("afterend",v),i.current.addDestroyFunc(()=>v.remove()))},I={setWidth:v=>{c.current&&(c.current.style.width=v)},toggleCss:(v,C)=>g.current.toggleCss(v,C),setUserStyles:v=>u(v),setAriaSort:v=>{c.current&&(v?vt(c.current,v):wt(c.current))},setUserCompDetails:v=>o(v),getUserCompInstance:()=>F.current||void 0,refreshSelectAllGui:S,removeSelectAllGui:()=>{var v;return(v=e.getSelectAllGui())==null?void 0:v.remove()}};e.setComp(I,p,m.current,h.current,i.current),S()},[]);t.useLayoutEffect(()=>ve(n,r,h.current,F),[n]),t.useEffect(()=>{e.setDragSource(c.current)},[n]);const P=t.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&ge(n.componentClass)),[n]),E=n==null?void 0:n.componentFromFramework,y=n==null?void 0:n.componentClass;return a.createElement("div",{ref:f,style:l,className:"ag-header-cell",role:"columnheader"},a.createElement("div",{ref:m,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:h,className:"ag-header-cell-comp-wrapper",role:"presentation"},E?P?a.createElement(y,{...n.params}):a.createElement(y,{...n.params,ref:F}):null))},es=t.memo(Xt),ts=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},ss=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(ee),[n,o]=t.useState(),[l,u]=t.useState(()=>new ae("ag-header-cell","ag-floating-filter")),[i,c]=t.useState(()=>new ae),[m,h]=t.useState(()=>new ae("ag-floating-filter-button","ag-hidden")),[F,g]=t.useState("false"),[f,P]=t.useState(),[,E]=t.useState(1),y=t.useRef(),p=t.useRef(null),S=t.useRef(null),I=t.useRef(null),v=t.useRef(null),C=t.useRef(),V=t.useRef(),A=H=>{H!=null&&C.current&&C.current(H)},_=t.useCallback(H=>{if(p.current=H,!H||!e.isAlive()||s.isDestroyed()){y.current=s.destroyBean(y.current);return}y.current=s.createBean(new Ce),V.current=new ce(b=>{C.current=b});const T={toggleCss:(b,G)=>u(Q=>Q.setClass(b,G)),setUserStyles:b=>o(b),addOrRemoveBodyCssClass:(b,G)=>c(Q=>Q.setClass(b,G)),setButtonWrapperDisplayed:b=>{h(G=>G.setClass("ag-hidden",!b)),g(b?"false":"true")},setWidth:b=>{p.current&&(p.current.style.width=b)},setCompDetails:b=>P(b),getFloatingFilterComp:()=>V.current?V.current:null,setMenuIcon:b=>{var G;return(G=v.current)==null?void 0:G.appendChild(b)}};e.setComp(T,H,v.current,S.current,y.current)},[]);t.useLayoutEffect(()=>ve(f,s,S.current,A),[f]);const O=t.useMemo(()=>l.toString(),[l]),W=t.useMemo(()=>i.toString(),[i]),R=t.useMemo(()=>m.toString(),[m]),d=t.useMemo(()=>!!(f&&f.componentFromFramework&&ge(f.componentClass)),[f]),w=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),L=t.useMemo(()=>r.get("enableFilterHandlers"),[]),[k,J]=t.useState();t.useEffect(()=>{if(f!=null&&f.componentFromFramework)if(w){const H=L?ts:_t,T=new H(f.params,()=>E(b=>b+1));A(T),J(T)}else Be()},[f]);const N=k==null?void 0:k.getProps(),M=f==null?void 0:f.componentFromFramework,j=f==null?void 0:f.componentClass;return a.createElement("div",{ref:_,style:n,className:O,role:"gridcell"},a.createElement("div",{ref:S,className:W,role:"presentation"},M?w?N&&a.createElement(Ge.Provider,{value:{setMethods:H=>k.setMethods(H)}},a.createElement(j,{...N})):a.createElement(j,{...f.params,ref:d?()=>{}:A}):null),a.createElement("div",{ref:I,"aria-hidden":F,className:R,role:"presentation"},a.createElement("button",{ref:v,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},rs=t.memo(ss),ns=({ctrl:e})=>{const{context:s}=t.useContext(ee),[r,n]=t.useState(),[o,l]=t.useState(()=>new ae),[u,i]=t.useState(()=>new ae),[c,m]=t.useState("false"),[h,F]=t.useState(),[g,f]=t.useState(),P=t.useRef(),E=t.useRef(null),y=t.useRef(null),p=t.useRef(null),S=t.useRef(),I=t.useCallback(O=>{if(E.current=O,!O||!e.isAlive()||s.isDestroyed()){P.current=s.destroyBean(P.current);return}P.current=s.createBean(new Ce);const W={setWidth:R=>{E.current&&(E.current.style.width=R)},toggleCss:(R,d)=>l(w=>w.setClass(R,d)),setUserStyles:R=>n(R),setHeaderWrapperHidden:R=>{const d=p.current;d&&(R?d.style.setProperty("display","none"):d.style.removeProperty("display"))},setHeaderWrapperMaxHeight:R=>{const d=p.current;d&&(R!=null?d.style.setProperty("max-height",`${R}px`):d.style.removeProperty("max-height"),d.classList.toggle("ag-header-cell-comp-wrapper-limited-height",R!=null))},setUserCompDetails:R=>f(R),setResizableDisplayed:R=>{i(d=>d.setClass("ag-hidden",!R)),m(R?"false":"true")},setAriaExpanded:R=>F(R),getUserCompInstance:()=>S.current||void 0};e.setComp(W,O,y.current,p.current,P.current)},[]);t.useLayoutEffect(()=>ve(g,s,p.current),[g]),t.useEffect(()=>{E.current&&e.setDragSource(E.current)},[g]);const v=t.useMemo(()=>!!((g==null?void 0:g.componentFromFramework)&&ge(g.componentClass)),[g]),C=t.useMemo(()=>"ag-header-group-cell "+o.toString(),[o]),V=t.useMemo(()=>"ag-header-cell-resize "+u.toString(),[u]),A=g==null?void 0:g.componentFromFramework,_=g==null?void 0:g.componentClass;return a.createElement("div",{ref:I,style:r,className:C,role:"columnheader","aria-expanded":h},a.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},A?v?a.createElement(_,{...g.params}):a.createElement(_,{...g.params,ref:S}):null),a.createElement("div",{ref:y,"aria-hidden":c,className:V}))},os=t.memo(ns),as=({ctrl:e})=>{const{gos:s,context:r}=t.useContext(ee),{topOffset:n,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),l=t.useMemo(()=>s.get("tabIndex"),[]),[u,i]=t.useState(()=>e.getAriaRowIndex()),c=e.headerRowClass,[m,h]=t.useState(()=>o+"px"),[F,g]=t.useState(()=>n+"px"),f=t.useRef(null),[P,E]=t.useState(()=>e.getUpdatedHeaderCtrls()),y=t.useRef(),p=t.useRef(null),S=t.useCallback(C=>{if(p.current=C,!C||!e.isAlive()||r.isDestroyed()){y.current=r.destroyBean(y.current);return}y.current=r.createBean(new Ce);const V={setHeight:A=>h(A),setTop:A=>g(A),setHeaderCtrls:(A,_,O)=>{const W=f.current,R=Ee(W,A,_);R!==W&&(f.current=R,Re(O,()=>E(R)))},setWidth:A=>{p.current&&(p.current.style.width=A)},setRowIndex:A=>{i(A)}};e.setComp(V,y.current,!1)},[]),I=t.useMemo(()=>({height:m,top:F}),[m,F]),v=t.useCallback(C=>{switch(e.type){case"group":return a.createElement(os,{ctrl:C,key:C.instanceId});case"filter":return a.createElement(rs,{ctrl:C,key:C.instanceId});default:return a.createElement(es,{ctrl:C,key:C.instanceId})}},[]);return a.createElement("div",{ref:S,className:c,role:"row",style:I,tabIndex:l,"aria-rowindex":u},P.map(v))},cs=t.memo(as),ls=({pinned:e})=>{const[s,r]=t.useState(!0),[n,o]=t.useState([]),{context:l}=t.useContext(ee),u=t.useRef(null),i=t.useRef(null),c=t.useRef(),m=e==="left",h=e==="right",F=!m&&!h,g=t.useCallback(E=>{if(u.current=E,!E||l.isDestroyed()){c.current=l.destroyBean(c.current);return}c.current=l.createBean(new nt(e));const y={setDisplayed:r,setCtrls:p=>o(p),setCenterWidth:p=>{i.current&&(i.current.style.width=p)},setViewportScrollLeft:p=>{u.current&&(u.current.scrollLeft=p)},setPinnedContainerWidth:p=>{u.current&&(u.current.style.width=p,u.current.style.minWidth=p,u.current.style.maxWidth=p)}};c.current.setComp(y,u.current)},[]),f=s?"":"ag-hidden",P=()=>n.map(E=>a.createElement(cs,{ctrl:E,key:E.instanceId}));return m?a.createElement("div",{ref:g,className:"ag-pinned-left-header "+f,"aria-hidden":!s,role:"rowgroup"},P()):h?a.createElement("div",{ref:g,className:"ag-pinned-right-header "+f,"aria-hidden":!s,role:"rowgroup"},P()):F?a.createElement("div",{ref:g,className:"ag-header-viewport "+f,role:"rowgroup",tabIndex:-1},a.createElement("div",{ref:i,className:"ag-header-container",role:"presentation"},P())):null},Fe=t.memo(ls),is=()=>{const[e,s]=t.useState(()=>new ae),[r,n]=t.useState(),{context:o}=t.useContext(ee),l=t.useRef(null),u=t.useRef(),i=t.useCallback(h=>{if(l.current=h,!h||o.isDestroyed()){u.current=o.destroyBean(u.current);return}u.current=o.createBean(new ot);const F={toggleCss:(g,f)=>s(P=>P.setClass(g,f)),setHeightAndMinHeight:g=>n(g)};u.current.setComp(F,h,h)},[]),c=t.useMemo(()=>"ag-header "+e.toString(),[e]),m=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:i,className:c,style:m,role:"presentation"},a.createElement(Fe,{pinned:"left"}),a.createElement(Fe,{pinned:null}),a.createElement(Fe,{pinned:"right"}))},us=t.memo(is),ds=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const n=r.parentElement;if(n){const o=document.createComment(e);return n.insertBefore(o,r),()=>{n.removeChild(o)}}}},[e])},he=ds,ps=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ce(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var s;this.componentInstance=e,(s=this.resolveInstanceCreated)==null||s.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},hs=e=>{const s=t.useRef(e),r=t.useRef(),n=t.useRef(!1),o=t.useRef(!1),[,l]=t.useState(0);n.current&&(o.current=!0),t.useEffect(()=>(n.current||(r.current=s.current(),n.current=!0),l(u=>u+1),()=>{var u;o.current&&((u=r.current)==null||u.call(r))}),[])},ms=e=>{const[s,r]=t.useState(),n=t.useContext(ee),{context:o,popupSvc:l,gos:u,editSvc:i}=n,{editDetails:c,cellCtrl:m,eParentCell:h}=e;return hs(()=>{var E,y;const{compDetails:F}=c,g=u.get("stopEditingWhenCellsLoseFocus");let f,P;if(!o.isDestroyed()){P=o.createBean(i.createPopupEditorWrapper(F.params));const p=P.getGui();if(e.jsChildComp){const A=e.jsChildComp.getGui();A&&p.appendChild(A)}const{column:S,rowNode:I}=m,v={column:S,rowNode:I,type:"popupCellEditor",eventSource:h,ePopup:p,position:c.popupPosition,keepWithinBounds:!0},C=l==null?void 0:l.positionPopupByComponent.bind(l,v),V=l==null?void 0:l.addPopup({modal:g,eChild:p,closeOnEsc:!0,closedCallback:()=>{m.onPopupEditorClosed()},anchorToElement:h,positionCallback:C,ariaOwns:h});f=V?V.hideFunc:void 0,r(P),(y=(E=e.jsChildComp)==null?void 0:E.afterGuiAttached)==null||y.call(E)}return()=>{f==null||f(),o.destroyBean(P)}}),t.useLayoutEffect(()=>()=>{m.isCellFocused()&&(s!=null&&s.getGui().contains(at(n)))&&h.focus({preventScroll:!0})},[s]),s&&e.wrappedContent?Ve.createPortal(e.wrappedContent,s.getGui()):null},Te=t.memo(ms),fs=(e,s,r)=>{const{compProxy:n}=e;r(n);const o=n.getProps(),l=ge(s);return a.createElement(Ge.Provider,{value:{setMethods:u=>n.setMethods(u)}},l?a.createElement(s,{...o}):a.createElement(s,{...o,ref:u=>n.setRef(u)}))},Ne=(e,s,r)=>e.compProxy?fs(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}),Cs=(e,s,r,n,o)=>{const l=e.compDetails,u=l.componentClass,i=l.componentFromFramework&&!e.popup,c=l.componentFromFramework&&e.popup,m=!l.componentFromFramework&&e.popup;return i?Ne(e,u,s):c?a.createElement(Te,{editDetails:e,cellCtrl:n,eParentCell:r,wrappedContent:Ne(e,u,s)}):m&&o?a.createElement(Te,{editDetails:e,cellCtrl:n,eParentCell:r,jsChildComp:o}):null},gs=(e,s,r,n,o,l)=>{const{context:u}=t.useContext(ee),i=t.useCallback(()=>{const c=o.current;if(!c)return;const m=c.getGui();m&&m.parentElement&&m.parentElement.removeChild(m),u.destroyBean(c),o.current=void 0},[]);t.useEffect(()=>{const c=e!=null,m=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,h=s&&r==null;if(!(c&&m&&!h)){i();return}const g=e.compDetails;if(o.current){const P=o.current,y=P.refresh!=null&&e.force==!1?P.refresh(g.params):!1;if(y===!0||y===void 0)return;i()}g.newAgStackInstance().then(P=>{if(!P)return;const E=P.getGui();if(!E)return;(s?r:l.current).appendChild(E),o.current=P})},[e,s,n]),t.useEffect(()=>i,[])},Ke=gs,ys=({cellCtrl:e,parent:s})=>{var o;const r=t.useRef(),n=t.useMemo(()=>{const{loadingComp:l}=e.getDeferLoadingCellRenderer();return l?{value:void 0,compDetails:l,force:!1}:void 0},[e]);if(Ke(n,!1,void 0,1,r,s),(o=n==null?void 0:n.compDetails)!=null&&o.componentFromFramework){const l=n.compDetails.componentClass;return a.createElement(l,{...n.compDetails.params})}return a.createElement(a.Fragment,null)},Rs=({cellCtrl:e,printLayout:s,editingCell:r})=>{const n=t.useContext(ee),{context:o}=n,{column:{colIdSanitised:l},instanceId:u}=e,i=t.useRef(),[c,m]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[h,F]=t.useState(),[g,f]=t.useState(1),[P,E]=t.useState(),[y,p]=t.useState(!1),[S,I]=t.useState(!1),[v,C]=t.useState(!1),[V,A]=t.useState(),_=t.useMemo(()=>e.isForceWrapper(),[e]),O=t.useMemo(()=>e.getCellAriaRole(),[e]),W=t.useRef(null),R=t.useRef(null),d=t.useRef(null),w=t.useRef(),L=t.useRef(),k=t.useRef(),J=t.useRef([]),N=t.useRef(),M=t.useRef(),[j,H]=t.useState(0),T=t.useCallback(x=>{M.current=x,H(D=>D+1)},[]),b=c!=null&&(y||v||S)&&(h==null||!!h.popup),G=_||b,Q=t.useCallback(x=>{if(L.current=x,x){const D=x.isCancelBeforeStart&&x.isCancelBeforeStart();setTimeout(()=>{D?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(x))})}},[e]),re=t.useRef();re.current||(re.current=new Pe(()=>W.current)),Ke(c,G,M.current,j,w,W);const le=t.useRef();t.useLayoutEffect(()=>{var z,U;const x=le.current,D=c;if(le.current=c,x==null||x.compDetails==null||D==null||D.compDetails==null)return;(z=N.current)==null||z.refreshVisibility();const X=x.compDetails,Y=D.compDetails;if(X.componentClass!=Y.componentClass||((U=d.current)==null?void 0:U.refresh)==null)return;d.current.refresh(Y.params)!=!0&&f(ie=>ie+1)},[c]),t.useLayoutEffect(()=>{if(!(h&&!h.compDetails.componentFromFramework)||o.isDestroyed())return;const D=h.compDetails,X=h.popup===!0,Y=D.newAgStackInstance();return Y.then(B=>{if(!B)return;const z=B.getGui();if(Q(B),!X){const U=(_?k:W).current;U==null||U.appendChild(z),B.afterGuiAttached&&B.afterGuiAttached()}A(B)}),()=>{Y.then(B=>{var U;const z=B.getGui();e.disableEditorTooltipFeature(),o.destroyBean(B),Q(void 0),A(void 0),(U=z==null?void 0:z.parentElement)==null||U.removeChild(z)})}},[h]);const me=t.useCallback(x=>{if(k.current=x,!x||o.isDestroyed()||!e.isAlive()){const Y=J.current;J.current=[];for(const B of Y)B();return}let D;const X=Y=>{Y&&(x.insertAdjacentElement("afterbegin",Y.getGui()),J.current.push(()=>{St(Y.getGui()),o.destroyBean(Y),N.current===D&&(N.current=void 0)}))};y&&X(e.createSelectionCheckbox()),v&&X(e.createDndSource()),S&&(D=e.createRowDragComp(),N.current=D,D&&(X(D),D.refreshVisibility()))},[e,o,v,S,y]),fe=t.useCallback(()=>{const x=!e.isCellSpanning()||R.current,D=W.current;if(!D||!x||!e||!e.isAlive()||o.isDestroyed()){i.current=o.destroyBean(i.current);return}i.current=o.createBean(new Ce);const X={toggleCss:(B,z)=>re.current.toggleCss(B,z),setUserStyles:B=>E(B),getFocusableElement:()=>W.current,setIncludeSelection:B=>p(B),setIncludeRowDrag:B=>I(B),setIncludeDndSource:B=>C(B),getCellEditor:()=>L.current||null,getCellRenderer:()=>d.current??w.current,getParentOfValue:()=>M.current??k.current??W.current,setRenderDetails:(B,z,U)=>{var ue;const ie=()=>{m($=>($==null?void 0:$.compDetails)!==B||($==null?void 0:$.value)!==z||($==null?void 0:$.force)!==U?{value:z,compDetails:B,force:U}:$)};if((ue=B==null?void 0:B.params)!=null&&ue.deferRender&&!e.rowNode.group){const{loadingComp:$,onReady:we}=e.getDeferLoadingCellRenderer();if($){m({value:void 0,compDetails:$,force:!1}),we.then(()=>Bt(ie));return}}ie()},setEditDetails:(B,z,U,ie)=>{if(B){let ue;B.componentFromFramework&&(ie?ue=new ps(B.params,()=>f($=>$+1)):Be()),F({compDetails:B,popup:z,popupPosition:U,compProxy:ue}),z||m(void 0)}else e.hasBrowserFocus()&&X.getFocusableElement().focus({preventScroll:!0}),F($=>{$!=null&&$.compProxy&&(L.current=void 0)})},refreshEditStyles:(B,z)=>{if(!W.current)return;const{current:U}=re;U.toggleCss("ag-cell-value",!G),U.toggleCss("ag-cell-inline-editing",!!B&&!z),U.toggleCss("ag-cell-popup-editing",!!B&&!!z),U.toggleCss("ag-cell-not-inline-editing",!B||!!z)}},Y=k.current||void 0;e.setComp(X,D,R.current??void 0,Y,s,r,i.current)},[]),ye=t.useCallback(x=>{W.current=x,fe()},[]),q=t.useCallback(x=>{R.current=x,fe()},[]),pe=t.useMemo(()=>{var D;return!!(((D=c==null?void 0:c.compDetails)==null?void 0:D.componentFromFramework)&&ge(c.compDetails.componentClass))},[c]);t.useLayoutEffect(()=>{if(!W.current)return;const{current:x}=re;x.toggleCss("ag-cell-value",!G),x.toggleCss("ag-cell-inline-editing",!!h&&!h.popup),x.toggleCss("ag-cell-popup-editing",!!h&&!!h.popup),x.toggleCss("ag-cell-not-inline-editing",!h||!!h.popup)});const Z=()=>{var X;const{compDetails:x,value:D}=c;if(!x)return((X=D==null?void 0:D.toString)==null?void 0:X.call(D))??D;if(x.componentFromFramework){const Y=x.componentClass;return a.createElement(t.Suspense,{fallback:a.createElement(ys,{cellCtrl:e,parent:W})},pe?a.createElement(Y,{...x.params,key:g}):a.createElement(Y,{...x.params,key:g,ref:d}))}},ne=()=>{const x=()=>c==null?null:G?a.createElement("span",{role:"presentation",id:`cell-${u}`,className:"ag-cell-value",ref:T},Z()):Z(),D=X=>Cs(X,Q,W.current,e,V);return h!=null?h.popup?a.createElement(a.Fragment,null,x(),D(h)):D(h):x()},de=()=>a.createElement("div",{ref:ye,style:P,role:O,"col-id":l},G?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:me},ne()):ne());return e.isCellSpanning()?a.createElement("div",{ref:q,className:"ag-spanned-cell-wrapper",role:"presentation"},de()):de()},vs=t.memo(Rs),ws=({rowCtrl:e,containerType:s})=>{const{context:r,gos:n,editSvc:o}=t.useContext(ee),l=t.useContext(Le)==="default",u=t.useRef(),i=t.useRef(e.getDomOrder()),c=e.isFullWidth(),m=e.rowNode.displayed,[h,F]=t.useState(()=>m?e.rowNode.getRowIndexString():null),[g,f]=t.useState(()=>e.rowId),[P,E]=t.useState(()=>e.businessKey),[y,p]=t.useState(()=>e.rowStyles),S=t.useRef(null),[I,v]=t.useState(()=>null),[C,V]=t.useState(),[A,_]=t.useState(()=>m?e.getInitialRowTop(s):void 0),[O,W]=t.useState(()=>m?e.getInitialTransform(s):void 0),R=t.useRef(null),d=t.useRef(),w=t.useRef(),L=t.useRef(!1),[k,J]=t.useState(0);t.useEffect(()=>{var pe;if(L.current||!C||k>10)return;const q=(pe=R.current)==null?void 0:pe.firstChild;q?(e.setupDetailRowAutoHeight(q),L.current=!0):J(Z=>Z+1)},[C,k]);const N=t.useRef();N.current||(N.current=new Pe(()=>R.current));const M=t.useRef(()=>{}),j=t.useCallback(q=>(M.current=q,()=>{M.current=()=>{}}),[]),H=It(j,()=>S.current,[]),T=l?H:I,b=t.useCallback(q=>{if(R.current=q,u.current=q?r.createBean(new Ce):r.destroyBean(u.current),!q){e.unsetComp(s);return}if(!e.isAlive()||r.isDestroyed())return;const pe={setTop:_,setTransform:W,toggleCss:(Z,ne)=>N.current.toggleCss(Z,ne),setDomOrder:Z=>i.current=Z,setRowIndex:F,setRowId:f,setRowBusinessKey:E,setUserStyles:p,setCellCtrls:(Z,ne)=>{const de=S.current,x=Ee(de,Z,i.current);x!==de&&(S.current=x,l?M.current():Re(ne,()=>v(x)))},showFullWidth:Z=>{w.current=Z.params,V(Z)},getFullWidthCellRenderer:()=>d.current,getFullWidthCellRendererParams:()=>w.current,refreshFullWidth:Z=>{const ne=Z();return w.current=ne,me.current?(V(de=>({...de,params:ne})),!0):!d.current||!d.current.refresh?!1:d.current.refresh(ne)}};e.setComp(pe,q,s,u.current)},[]);t.useLayoutEffect(()=>ve(C,r,R.current,d),[C]);const G=t.useMemo(()=>{const q={top:A,transform:O};return Object.assign(q,y),q},[A,O,y]),Q=c&&(C==null?void 0:C.componentFromFramework),re=!c&&T!=null,le=t.useMemo(()=>!!((C==null?void 0:C.componentFromFramework)&&ge(C.componentClass)),[C]),me=t.useRef(!1);t.useEffect(()=>{me.current=le&&!!C&&!!n.get("reactiveCustomComponents")},[le,C]);const fe=()=>T==null?void 0:T.map(q=>a.createElement(vs,{cellCtrl:q,editingCell:(o==null?void 0:o.isEditing(q,{withOpenEditor:!0}))??!1,printLayout:e.printLayout,key:q.instanceId})),ye=()=>{const q=C.componentClass;return le?a.createElement(q,{...C.params}):a.createElement(q,{...C.params,ref:d})};return a.createElement("div",{ref:b,role:"row",style:G,"row-index":h,"row-id":g,"row-business-key":P},re?fe():Q?ye():null)},He=t.memo(ws),Ss=({name:e})=>{const{context:s,gos:r}=t.useContext(ee),n=t.useMemo(()=>ct(e),[e]),o=t.useRef(null),l=t.useRef(null),u=t.useRef(null),i=t.useRef([]),c=t.useRef([]),[m,h]=t.useState(()=>[]),F=!!r.get("enableCellSpan")&&!!n.getSpannedRowCtrls,g=t.useRef([]),f=t.useRef([]),[P,E]=t.useState(()=>[]),y=t.useRef(!1),p=t.useRef(),S=t.useMemo(()=>oe("ag-viewport",lt(e)),[e]),I=t.useMemo(()=>oe(it(e)),[e]),v=t.useMemo(()=>oe("ag-spanning-container",ut(e)),[e]),C=n.type==="center"||F,V=C?o:l;he(" AG Row Container "+e+" ",V);const A=t.useCallback(()=>{const k=!C||o.current!=null,J=l.current!=null,N=!F||u.current!=null;return k&&J&&N},[]),_=t.useCallback(()=>o.current==null&&l.current==null&&u.current==null,[]),O=t.useCallback(()=>{if(_()&&(p.current=s.destroyBean(p.current)),!s.isDestroyed()&&A()){const k=M=>{const j=Ee(c.current,i.current,y.current);j!==c.current&&(c.current=j,Re(M,()=>h(j)))},J=M=>{const j=Ee(f.current,g.current,y.current);j!==f.current&&(f.current=j,Re(M,()=>E(j)))},N={setHorizontalScroll:M=>{o.current&&(o.current.scrollLeft=M)},setViewportHeight:M=>{o.current&&(o.current.style.height=M)},setRowCtrls:({rowCtrls:M,useFlushSync:j})=>{const H=!!j&&i.current.length>0&&M.length>0;i.current=M,k(H)},setSpannedRowCtrls:(M,j)=>{const H=!!j&&g.current.length>0&&M.length>0;g.current=M,J(H)},setDomOrder:M=>{y.current!=M&&(y.current=M,k(!1))},setContainerWidth:M=>{l.current&&(l.current.style.width=M)},setOffsetTop:M=>{l.current&&(l.current.style.transform=`translateY(${M})`)}};p.current=s.createBean(new dt(e)),p.current.setComp(N,l.current,u.current??void 0,o.current)}},[A,_]),W=t.useCallback(k=>{l.current=k,O()},[O]),R=t.useCallback(k=>{u.current=k,O()},[O]),d=t.useCallback(k=>{o.current=k,O()},[O]),w=()=>a.createElement("div",{className:I,ref:W,role:C?"presentation":"rowgroup"},m.map(k=>a.createElement(He,{rowCtrl:k,containerType:n.type,key:k.instanceId})));if(!C)return w();const L=()=>a.createElement("div",{className:v,ref:R,role:"presentation"},P.map(k=>a.createElement(He,{rowCtrl:k,containerType:n.type,key:k.instanceId})));return a.createElement("div",{className:S,ref:d,role:"rowgroup"},w(),F?L():null)},bs=t.memo(Ss),Es=()=>{const e=t.useContext(ee),{context:s,overlays:r}=e,[n,o]=t.useState(""),[l,u]=t.useState(0),[i,c]=t.useState(0),[m,h]=t.useState("0px"),[F,g]=t.useState("0px"),[f,P]=t.useState("100%"),[E,y]=t.useState("0px"),[p,S]=t.useState("0px"),[I,v]=t.useState("100%"),[C,V]=t.useState(!0),[A,_]=t.useState(!0),[O,W]=t.useState(null),[R,d]=t.useState(""),[w,L]=t.useState(null),[k,J]=t.useState("ag-layout-normal"),N=t.useRef();N.current||(N.current=new Pe(()=>M.current));const M=t.useRef(null),j=t.useRef(null),H=t.useRef(null),T=t.useRef(null),b=t.useRef(null),G=t.useRef(null),Q=t.useRef(null),re=t.useRef([]),le=t.useRef([]);he(" AG Grid Body ",M),he(" AG Pinned Top ",j),he(" AG Sticky Top ",H),he(" AG Middle ",G),he(" AG Pinned Bottom ",Q);const me=t.useCallback(U=>{if(M.current=U,!U||s.isDestroyed()){re.current=s.destroyBeans(re.current),le.current.forEach(K=>K()),le.current=[];return}const ie=(K,te)=>{K.appendChild(te),le.current.push(()=>K.removeChild(te))},ue=K=>{const te=s.createBean(new K);return re.current.push(te),te},$=(K,te,et)=>{ie(K,document.createComment(et)),ie(K,ue(te).getGui())};$(U,Pt," AG Fake Horizontal Scroll ");const we=r==null?void 0:r.getOverlayWrapperCompClass();we&&$(U,we," AG Overlay Wrapper "),b.current&&$(b.current,kt," AG Fake Vertical Scroll ");const Xe={setRowAnimationCssOnBodyViewport:o,setColumnCount:K=>{M.current&&Et(M.current,K)},setRowCount:K=>{M.current&&bt(M.current,K)},setTopHeight:u,setBottomHeight:c,setStickyTopHeight:h,setStickyTopTop:g,setStickyTopWidth:P,setTopInvisible:V,setBottomInvisible:_,setColumnMovingCss:(K,te)=>N.current.toggleCss(K,te),updateLayoutClasses:J,setAlwaysVerticalScrollClass:W,setPinnedTopBottomOverflowY:d,setCellSelectableCss:(K,te)=>L(te?K:null),setBodyViewportWidth:K=>{G.current&&(G.current.style.width=K)},registerBodyViewportResizeListener:K=>{if(G.current){const te=_e(e,G.current,K);le.current.push(()=>te())}},setStickyBottomHeight:y,setStickyBottomBottom:S,setStickyBottomWidth:v,setGridRootRole:K=>U.setAttribute("role",K)},Ie=s.createBean(new pt);re.current.push(Ie),Ie.setComp(Xe,U,G.current,j.current,Q.current,H.current,T.current)},[]),fe=t.useMemo(()=>oe("ag-root","ag-unselectable",k),[k]),ye=t.useMemo(()=>oe("ag-body-viewport",n,k,O,w),[n,k,O,w]),q=t.useMemo(()=>oe("ag-body",k),[k]),pe=t.useMemo(()=>oe("ag-floating-top",C?"ag-invisible":null,w),[w,C]),Z=t.useMemo(()=>oe("ag-sticky-top",w),[w]),ne=t.useMemo(()=>oe("ag-sticky-bottom",E==="0px"?"ag-invisible":null,w),[w,E]),de=t.useMemo(()=>oe("ag-floating-bottom",A?"ag-invisible":null,w),[w,A]),x=t.useMemo(()=>({height:l,minHeight:l,overflowY:R}),[l,R]),D=t.useMemo(()=>({height:m,top:F,width:f}),[m,F,f]),X=t.useMemo(()=>({height:E,bottom:p,width:I}),[E,p,I]),Y=t.useMemo(()=>({height:i,minHeight:i,overflowY:R}),[i,R]),B=U=>a.createElement(bs,{name:U,key:`${U}-container`}),z=({section:U,children:ie,className:ue,style:$})=>a.createElement("div",{ref:U,className:ue,role:"presentation",style:$},ie.map(B));return a.createElement("div",{ref:me,className:fe},a.createElement(us,null),z({section:j,className:pe,style:x,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:q,ref:b,role:"presentation"},z({section:G,className:ye,children:["left","center","right","fullWidth"]})),z({section:H,className:Z,style:D,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),z({section:T,className:ne,style:X,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),z({section:Q,className:de,style:Y,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},Ps=t.memo(Es),ks=(e,s)=>{const{children:r,eFocusableElement:n,onTabKeyDown:o,gridCtrl:l,forceFocusOutWhenTabGuardsAreEmpty:u,isEmpty:i}=e,{context:c}=t.useContext(ee),m=t.useRef(null),h=t.useRef(null),F=t.useRef(),g=p=>{const S=p==null?void 0:parseInt(p,10).toString();[m,h].forEach(I=>{var v,C;S===void 0?(v=I.current)==null||v.removeAttribute("tabindex"):(C=I.current)==null||C.setAttribute("tabindex",S)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(p){var S;(S=F.current)==null||S.forceFocusOutOfContainer(p)}}));const f=t.useCallback(()=>{const p=m.current,S=h.current;if(!p&&!S||c.isDestroyed()){F.current=c.destroyBean(F.current);return}if(p&&S){const I={setTabIndex:g};F.current=c.createBean(new ht({comp:I,eTopGuard:p,eBottomGuard:S,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:u,focusInnerElement:v=>l.focusInnerElement(v),isEmpty:i}))}},[]),P=t.useCallback(p=>{m.current=p,f()},[f]),E=t.useCallback(p=>{h.current=p,f()},[f]),y=p=>{const S=p==="top"?Me.TAB_GUARD_TOP:Me.TAB_GUARD_BOTTOM;return a.createElement("div",{className:`${Me.TAB_GUARD} ${S}`,role:"presentation",ref:p==="top"?P:E})};return a.createElement(a.Fragment,null,y("top"),r,y("bottom"))},Ms=t.forwardRef(ks),Fs=t.memo(Ms),As=({context:e})=>{const[s,r]=t.useState(""),[n,o]=t.useState(""),[l,u]=t.useState(null),[i,c]=t.useState(null),[m,h]=t.useState(!1),[F,g]=t.useState(),f=t.useRef(),P=t.useRef(null),E=t.useRef(),[y,p]=t.useState(null),S=t.useRef(()=>{}),I=t.useRef(),v=t.useRef([]),C=t.useCallback(()=>{},[]);he(" AG Grid ",P);const V=t.useCallback(d=>{if(P.current=d,f.current=d?e.createBean(new mt):e.destroyBean(f.current),!d||e.isDestroyed())return;const w=f.current;S.current=w.focusInnerElement.bind(w);const L={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:k=>{var J,N;if(!k&&((J=I.current)!=null&&J.isDisplayed())){I.current.forceFocusOutOfContainer(k);return}(N=E.current)==null||N.forceFocusOutOfContainer(k)},updateLayoutClasses:o,getFocusableContainers:()=>{var N;const k=[],J=(N=P.current)==null?void 0:N.querySelector(".ag-root");return J&&k.push({getGui:()=>J}),v.current.forEach(M=>{M.isDisplayed()&&k.push(M)}),k},setCursor:u,setUserSelect:c};w.setComp(L,d,d),h(!0)},[]);t.useEffect(()=>{const d=f.current,w=P.current;if(!F||!d||!y||!w||e.isDestroyed())return;const L=[],{watermarkSelector:k,paginationSelector:J,sideBarSelector:N,statusBarSelector:M,gridHeaderDropZonesSelector:j}=d.getOptionalSelectors(),H=[];if(j){const b=e.createBean(new j.component),G=b.getGui();w.insertAdjacentElement("afterbegin",G),H.push(G),L.push(b)}if(N){const b=e.createBean(new N.component),G=b.getGui(),Q=y.querySelector(".ag-tab-guard-bottom");Q&&(Q.insertAdjacentElement("beforebegin",G),H.push(G)),L.push(b),v.current.push(b)}const T=b=>{const G=e.createBean(new b),Q=G.getGui();return w.insertAdjacentElement("beforeend",Q),H.push(Q),L.push(G),G};if(M&&T(M.component),J){const b=T(J.component);I.current=b,v.current.push(b)}return k&&T(k.component),()=>{e.destroyBeans(L),H.forEach(b=>{var G;(G=b.parentElement)==null||G.removeChild(b)})}},[F,y,e]);const A=t.useMemo(()=>oe("ag-root-wrapper",s,n),[s,n]),_=t.useMemo(()=>oe("ag-root-wrapper-body","ag-focus-managed",n),[n]),O=t.useMemo(()=>({userSelect:i??"",WebkitUserSelect:i??"",cursor:l??""}),[i,l]),W=t.useCallback(d=>{E.current=d,g(d!==null)},[]),R=t.useCallback(()=>{var d;return!((d=f.current)!=null&&d.isFocusable())},[]);return a.createElement("div",{ref:V,className:A,style:O,role:"presentation"},a.createElement("div",{className:_,ref:p,role:"presentation"},m&&y&&!e.isDestroyed()&&a.createElement(ee.Provider,{value:e.getBeans()},a.createElement(Fs,{ref:W,eFocusableElement:y,onTabKeyDown:C,gridCtrl:f.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:R},a.createElement(Ps,null)))))},xs=t.memo(As),Gs=class extends At{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(s=>!!s.eGui))}},Qe={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Bs={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...Qe},Ye=new Set(Object.keys(Bs)),Is=new Set(Object.keys(Qe)),Ze=e=>{var p;const s=t.useRef(),r=t.useRef(null),n=t.useRef(null),o=t.useRef([]),l=t.useRef([]),u=t.useRef(e),i=t.useRef(),c=t.useRef(),m=t.useRef(!1),[h,F]=t.useState(void 0),[,g]=t.useState(0),f=t.useCallback(S=>{if(r.current=S,!S){o.current.forEach(d=>d()),o.current.length=0;return}const I=e.modules||[];n.current||(n.current=new Zt(()=>g(d=>d+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{var d;(d=n.current)==null||d.destroy(),n.current=null}));const v=gt(e.gridOptions,e,Object.keys(e).filter(d=>!Ye.has(d))),C=()=>{if(m.current){const d=()=>{var L;return(L=i.current)!=null&&L.shouldQueueUpdates()?void 0:l.current.shift()};let w=d();for(;w;)w(),w=d()}},V=new Ts(C);i.current=V;const A=new Gs,_={providedBeanInstances:{frameworkCompWrapper:new Ds(n.current,v),renderStatus:A},modules:I,frameworkOverrides:V,setThemeOnGridDiv:!0},O=d=>{F(d),d.createBean(A),o.current.push(()=>{d.destroy()}),d.getBean("ctrlsSvc").whenReady({addDestroyFunc:w=>{o.current.push(w)}},()=>{var L;if(d.isDestroyed())return;const w=s.current;w&&((L=e.passGridApi)==null||L.call(e,w))})},W=d=>{d.getBean("ctrlsSvc").whenReady({addDestroyFunc:w=>{o.current.push(w)}},()=>{l.current.forEach(w=>w()),l.current.length=0,m.current=!0})},R=new yt;v.gridId??(v.gridId=c.current),s.current=R.create(S,v,O,W,_),o.current.push(()=>{s.current=void 0}),s.current&&(c.current=s.current.getGridId())},[]),P=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),E=t.useCallback(S=>{var I;m.current&&!((I=i.current)!=null&&I.shouldQueueUpdates())?S():l.current.push(S)},[]);t.useEffect(()=>{const S=Os(u.current,e);u.current=e,E(()=>{s.current&&Rt(S,s.current)})},[e]);const y=!a.useSyncExternalStore||Se(e,"renderingMode")==="legacy"?"legacy":"default";return a.createElement("div",{style:P,className:e.className,ref:f},a.createElement(Le.Provider,{value:y},h&&!h.isDestroyed()?a.createElement(xs,{key:h.instanceId,context:h}):null,((p=n.current)==null?void 0:p.getPortals())??null))};function Os(e,s){const r={};return Object.keys(s).forEach(n=>{if(Ye.has(n)){Is.has(n)&&xe(274,{prop:n});return}const o=s[n];e[n]!==o&&(r[n]=o)}),r}var Ds=class extends Ft{constructor(e,s){super(),this.parent=e,this.gridOptions=s}createWrapper(e,s){const r=this.gridOptions;if(Se(r,"reactiveCustomComponents")){const u=(i=>{switch(i){case"filter":return Se(r,"enableFilterHandlers")?Vt:Ut;case"floatingFilterComponent":return Se(r,"enableFilterHandlers")?jt:Lt;case"dateComponent":return Nt;case"dragAndDropImageComponent":return Ht;case"loadingOverlayComponent":return $t;case"noRowsOverlayComponent":return qt;case"statusPanel":return Kt;case"toolPanel":return Qt;case"menuItem":return Jt;case"cellRenderer":return Tt;case"innerHeaderComponent":return zt}})(s.name);if(u)return new u(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Be();break}const o=!s.cellRenderer&&s.name!=="toolPanel";return new Je(e,this.parent,s,o)}},Ws=t.forwardRef((e,s)=>{const r=t.useContext(ee),{registry:n,context:o,gos:l,rowModel:u}=r,[i,c]=t.useState(()=>new ae),[m,h]=t.useState(()=>new ae),[F,g]=t.useState(),[f,P]=t.useState(),E=t.useRef(),y=t.useRef(null),p=t.useRef(),S=t.useMemo(()=>rt(e.api.getGridId(),(F==null?void 0:F.rowModelType)??"clientSide"),[e]),I=t.useMemo(()=>i.toString()+" ag-details-row",[i]),v=t.useMemo(()=>m.toString()+" ag-details-grid",[m]);s&&t.useImperativeHandle(s,()=>({refresh(){var A;return((A=E.current)==null?void 0:A.refresh())??!1}})),e.template&&xe(230);const C=t.useCallback(A=>{var W;if(y.current=A,!A||o.isDestroyed()){E.current=o.destroyBean(E.current),(W=p.current)==null||W.call(p);return}const _={toggleCss:(R,d)=>c(w=>w.setClass(R,d)),toggleDetailGridCss:(R,d)=>h(w=>w.setClass(R,d)),setDetailGrid:R=>g(R),setRowData:R=>P(R),getGui:()=>y.current},O=n.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(o.createBean(O),O.init(_,e),E.current=O,l.get("detailRowAutoHeight"))){const R=()=>{if(y.current==null)return;const d=y.current.clientHeight;d!=null&&d>0&&setTimeout(()=>{e.node.setRowHeight(d),(ft(l)||Ct(l))&&u.onRowHeightChanged()},0)};p.current=_e(r,A,R),R()}},[]),V=t.useCallback(A=>{var _;(_=E.current)==null||_.registerDetailWithMaster(A)},[]);return a.createElement("div",{className:I,ref:C},F&&a.createElement(Ze,{className:v,...F,modules:S,rowData:f,passGridApi:V}))}),Ts=class extends Mt{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:De,agGroupRowRenderer:De,agDetailCellRenderer:Ws},this.wrapIncoming=(s,r)=>r==="ensureVisible"?Gt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return xt()}},Us=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(Ze,{...this.props,passGridApi:this.setGridApi})}};export{Us as A};
